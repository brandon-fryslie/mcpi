{"id":"MCPI-0jp","content_hash":"bf48ba145f1e80b62ccaac27559b27c8e2d4bc8998065d327a53c9d165de3078","title":"Complete v0.6.0 Template Discovery CLI integration - Add --recommend flag","description":"Library implementation for Template Discovery Engine is 100% complete (19/19 tests passing, 91% coverage), but CLI integration is 0% complete. Users cannot access this feature.\n\nThis is P1-1 from BACKLOG.md: Add --recommend flag to mcpi add command.\n\nLibrary Status: COMPLETE\n- ProjectDetector: Working, tested, fast (\u003c100ms)\n- TemplateRecommender: Working, tested, accurate\n- All 19 library tests passing\n\nCLI Status: NOT STARTED\n- --recommend flag does not exist\n- No integration with CLI add command\n- Feature is production-ready but inaccessible to users\n\nEffort: ~3 hours","design":"1. Add --recommend boolean flag to cli.py add command\n2. When flag present, call ProjectDetector.detect()\n3. Pass ProjectContext to TemplateRecommender\n4. Get list of TemplateRecommendation objects\n5. Pass recommendations to Rich display handler (depends on MCPI-4)\n6. Wire into interactive flow (depends on MCPI-5)","acceptance_criteria":"- [ ] mcpi add \u003cserver\u003e --recommend flag exists\n- [ ] Flag triggers project detection and recommendation engine\n- [ ] Recommendations passed to display layer\n- [ ] Flag documented in mcpi add --help\n- [ ] Integration tests pass for --recommend flag","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-25T18:25:13.741071-07:00","updated_at":"2025-11-25T18:25:13.741071-07:00","source_repo":"."}
{"id":"MCPI-24w","content_hash":"4f2d3fa8b3affa892783a11312c713d8043acb8f81ea0cb532f1ab535dfd9fb6","title":"Complete v0.6.0 Template Discovery CLI integration - Rich display for recommendations","description":"This is P1-2 from BACKLOG.md: Implement Rich display for template recommendations.\n\nCreate user-friendly, informative display showing:\n- Recommended templates with confidence scores\n- Reasons why each template is recommended\n- Server requirements and configuration preview\n- Visual hierarchy and color coding\n\nEffort: ~4 hours","design":"1. Create display_recommendations() function using Rich library\n2. Build Rich table with columns: Rank, Template, Confidence, Reasons\n3. Use color coding: green (high confidence \u003e0.7), yellow (medium 0.4-0.7), red (low \u003c0.4)\n4. Format confidence as percentage with progress bar\n5. Show top recommendation with special highlighting\n6. Add footer with instructions for selection","acceptance_criteria":"- [ ] Rich table displays recommendations sorted by confidence\n- [ ] Confidence scores shown with visual indicators (colors, symbols)\n- [ ] Recommendation reasons displayed clearly\n- [ ] Template metadata shown (name, description, scope)\n- [ ] Display is readable and user-friendly\n- [ ] Unit tests for display formatting","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-25T18:24:43.966454-07:00","updated_at":"2025-11-25T18:25:34.882256-07:00","closed_at":"2025-11-25T18:25:34.882256-07:00","source_repo":"."}
{"id":"MCPI-2uh","content_hash":"0c1e1b5950e4ba3b74ac7aa63cb0847c3cfc1f81fad86a5ed37fbeefe89b390b","title":"Investigate plugin-based MCP server discovery implementation status","description":"STATUS-mcpi-list-bugs.md (Nov 24) claims plugin-based MCP discovery is NOT implemented, but runtime shows 'beads:beads' server with plugin scope in mcpi list output. This contradictory evidence requires investigation.\n\nEvidence of Feature Working:\n- mcpi list shows: beads:beads | claude-code | plugin | ENABLED | uv\n\nEvidence of Feature Missing:\n- STATUS-mcpi-list-bugs.md analysis says no PluginBasedScope implementation\n- ClaudeCodePlugin may have no plugin scope handler\n- Architecture analysis indicates missing feature\n\nInvestigation Required:\n1. Review ClaudeCodePlugin._initialize_scopes()\n2. Check for any PluginBasedScope implementation in codebase\n3. Determine how 'beads:beads' appears in mcpi list output\n4. Check if there's a workaround or undocumented feature\n\nIf Missing: Implement Solution 1 from STATUS-mcpi-list-bugs.md\nIf Exists: Update documentation to reflect actual implementation\nIf Hacky: Refactor to clean architecture","design":"Investigation Steps:\n1. Search codebase for 'PluginBasedScope' or 'plugin' scope references\n2. Review ClaudeCodePlugin initialization code\n3. Trace how 'beads:beads' server appears in mcpi list output\n4. Compare mcpi list vs claude mcp list output for plugin servers\n5. Document actual implementation vs expected architecture","acceptance_criteria":"- [ ] Determine actual implementation status (working/missing/hacky)\n- [ ] Document findings in investigation report\n- [ ] If missing: create follow-up issue for implementation\n- [ ] If exists: verify mcpi list shows all plugin servers that claude mcp list shows\n- [ ] If hacky: create follow-up issue for refactoring\n- [ ] Update CLAUDE.md with accurate plugin discovery documentation","status":"open","priority":0,"issue_type":"task","created_at":"2025-11-25T18:24:43.804178-07:00","updated_at":"2025-11-25T18:24:43.804178-07:00","source_repo":"."}
{"id":"MCPI-6cm","content_hash":"5512c8bfb2cbb534e0b4339f697d3d980936bdbbd50af6b88292ff264669d8c5","title":"Complete v0.6.0 Template Discovery CLI integration - Interactive selection flow","description":"This is P1-3 from BACKLOG.md: Wire up interactive accept/decline flow for template recommendations.\n\nImplement user interaction flow:\n- Display recommendations (using P1-2)\n- Prompt user to select a recommendation or decline\n- On acceptance: proceed with selected template\n- On decline: fall back to manual template selection or standard flow\n\nEffort: ~3 hours","design":"1. After displaying recommendations, prompt: 'Select recommendation (1-N) or decline (0):'\n2. Validate input (integer in range or 0)\n3. If valid selection: proceed with add using selected template\n4. If decline (0): continue to standard add flow (--list-templates or manual config)\n5. If invalid: re-prompt with error message\n6. Wire into existing add command flow\n7. Depends on MCPI-3 (flag) and MCPI-4 (display)","acceptance_criteria":"- [ ] User prompted to select from recommendations\n- [ ] Selection validated (1-N or decline)\n- [ ] On acceptance: selected template used for server configuration\n- [ ] On decline: fallback to standard add flow\n- [ ] Error handling for invalid input\n- [ ] E2E tests for full interactive flow","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-25T18:25:13.866395-07:00","updated_at":"2025-11-25T18:25:13.866395-07:00","source_repo":".","dependencies":[{"issue_id":"MCPI-6cm","depends_on_id":"MCPI-0jp","type":"blocks","created_at":"2025-11-25T18:25:18.601148-07:00","created_by":"daemon"},{"issue_id":"MCPI-6cm","depends_on_id":"MCPI-q76","type":"blocks","created_at":"2025-11-25T18:25:18.64389-07:00","created_by":"daemon"}]}
{"id":"MCPI-bfh","content_hash":"3ea0b05fc8643fc5d3c3ebe5c76f0798ea4baa8372b3563afc8ee1c62f8d1db9","title":"Fix test environment missing 'toml' dependency","description":"One test fails due to missing 'toml' module in test environment:\n\nTest: tests/test_functional_cli_workflows.py::TestCLIBasicCommands::test_list_command_workflow\nError: AssertionError: Should show filesystem server. Output: Error listing servers: No module named 'toml'\n\nRoot Cause: 'toml' is in pyproject.toml dependencies but not installed in test environment\n\nImpact: LOW - Runtime works fine, only affects this one test\n\nFix: Add toml to test dependencies or verify it's included in dev dependencies","design":"1. Check pyproject.toml [project.dependencies] for toml\n2. Check pyproject.toml [project.optional-dependencies.dev] for toml\n3. Add toml to appropriate dependency section if missing\n4. Run uv sync --dev to update environment\n5. Verify test passes","acceptance_criteria":"- [ ] test_list_command_workflow passes\n- [ ] toml module available in test environment\n- [ ] All 950 runnable tests pass (100%)\n- [ ] CI pipeline includes toml dependency","status":"open","priority":3,"issue_type":"bug","created_at":"2025-11-25T18:24:44.173932-07:00","updated_at":"2025-11-25T18:24:44.173932-07:00","source_repo":"."}
{"id":"MCPI-dsg","content_hash":"72e7772f4624e721db11f8e0baf539e88c42cbeb0b689124bd0ff8395b295747","title":"Refactor cli.py into modular command structure","description":"cli.py is 95KB in a single file, making it hard to maintain and navigate. This is acknowledged technical debt in PROJECT_SPEC.md line 348.\n\nCurrent: Single monolithic file with all commands\nTarget: Modular structure with commands in separate modules\n\nBenefits:\n- Improved maintainability\n- Easier to locate and update specific commands\n- Better separation of concerns\n- Follows SOLID principles\n\nPriority: P2 (post-v0.6.0 cleanup)","design":"1. Create src/mcpi/cli/commands/ directory\n2. Extract each command group to separate module:\n   - add.py: add, remove commands\n   - list.py: list, status commands\n   - scope.py: scope list, scope show, rescope\n   - catalog.py: catalog list, catalog info\n   - client.py: client list, client info, client set-default\n3. Keep main cli.py as entry point that imports commands\n4. Use Click command groups for organization\n5. Migrate incrementally, test after each extraction","acceptance_criteria":"- [ ] cli.py main file \u003c20KB\n- [ ] Commands extracted to separate modules (e.g., commands/add.py, commands/list.py)\n- [ ] All CLI tests still pass\n- [ ] No functionality changes\n- [ ] Import structure clean and logical\n- [ ] Documentation updated to reflect new structure","status":"open","priority":2,"issue_type":"chore","created_at":"2025-11-25T18:24:44.2794-07:00","updated_at":"2025-11-25T18:24:44.2794-07:00","source_repo":"."}
{"id":"MCPI-iv7","content_hash":"2340e4712d001a2cc416f88de92e9449a4d5d9c1eeb54e8d7c5584907f2d96a8","title":"Investigate and fix 57 skipped tests","description":"Test suite shows 57 tests skipped (5.7% of total). These may indicate:\n- Disabled features\n- Incomplete implementations\n- Platform-specific tests\n- Tests that need updating\n\nThis requires investigation to determine:\n1. Why tests are skipped\n2. Whether features are missing or just tests are outdated\n3. Whether to unskip, update, or remove tests\n\nEvidence:\n- pytest output: \"949 passed, 57 skipped\"\n- Unknown reason for skips\n- May impact test coverage metrics","design":"1. Run pytest -v to get list of all skipped tests\n2. Review each test file to find @pytest.mark.skip decorators\n3. Check git history to see when/why tests were skipped\n4. Verify if corresponding features are implemented\n5. Categorize skips: platform-specific, disabled feature, outdated test\n6. Create action plan for each category","acceptance_criteria":"- [ ] All 57 skipped tests reviewed\n- [ ] Reason documented for each skip\n- [ ] Tests unskipped if features are complete\n- [ ] Tests updated if implementation changed\n- [ ] Tests removed if no longer relevant\n- [ ] Follow-up issues created for missing features\n- [ ] Target: \u003c10 skipped tests remaining","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T18:24:44.122796-07:00","updated_at":"2025-11-25T18:24:44.122796-07:00","source_repo":"."}
{"id":"MCPI-l93","content_hash":"c446c59cd02a4b66a9d3f24072ece80015e537384e62623d56fdd5e9124bbcff","title":"Fix template-to-server-ID mapping for namespaced servers","description":"Templates use server_id='postgres' but catalog uses 'modelcontextprotocol/postgres'. This breaks template discovery for all namespaced servers.\n\nEvidence:\n- mcpi add postgres --list-templates fails (server not found)\n- mcpi add modelcontextprotocol/postgres --list-templates fails (no templates)\n- Templates in data/templates/postgres/*.yaml have server_id: postgres\n- Catalog has modelcontextprotocol/postgres\n\nRoot Cause: Template lookup assumes simple IDs, catalog uses namespaced IDs.\n\nFix Options:\n1. Update all templates to use full namespaced IDs\n2. Implement server ID alias/mapping system\n3. Make template lookup fuzzy-match on server name (RECOMMENDED)\n\nRecommended Approach: Implement fuzzy matching in TemplateManager.list_templates() to strip namespace prefix when looking up templates.","design":"1. Update TemplateManager.list_templates() to accept namespaced IDs\n2. Strip namespace prefix (e.g., 'modelcontextprotocol/') when looking up template directories\n3. Add fallback logic: try full ID first, then try ID with namespace stripped\n4. Update tests to verify both 'postgres' and 'modelcontextprotocol/postgres' work","acceptance_criteria":"- [ ] mcpi add postgres --list-templates shows templates\n- [ ] mcpi add modelcontextprotocol/postgres --list-templates shows templates\n- [ ] All 12 existing templates work with both simple and namespaced IDs\n- [ ] New tests cover both simple and namespaced server ID lookups\n- [ ] Template system works for github, filesystem, slack, brave-search","status":"open","priority":0,"issue_type":"bug","created_at":"2025-11-25T18:24:43.744672-07:00","updated_at":"2025-11-25T18:24:43.744672-07:00","source_repo":"."}
{"id":"MCPI-ll3","content_hash":"eab998f8f3b8657a3a20fda945db222b41cd4d203e04ed534fb87ab370921935","title":"Complete v0.6.0 Template Discovery CLI integration - Add --recommend flag","description":"Library implementation for Template Discovery Engine is 100% complete (19/19 tests passing, 91% coverage), but CLI integration is 0% complete. Users cannot access this feature.\n\nThis is P1-1 from BACKLOG.md: Add --recommend flag to mcpi add command.\n\nLibrary Status: COMPLETE\n- ProjectDetector: Working, tested, fast (\u003c100ms)\n- TemplateRecommender: Working, tested, accurate\n- All 19 library tests passing\n\nCLI Status: NOT STARTED\n- --recommend flag does not exist\n- No integration with CLI add command\n- Feature is production-ready but inaccessible to users\n\nEffort: ~3 hours","design":"1. Add --recommend boolean flag to cli.py add command\n2. When flag present, call ProjectDetector.detect()\n3. Pass ProjectContext to TemplateRecommender\n4. Get list of TemplateRecommendation objects\n5. Pass recommendations to Rich display handler (P1-2)\n6. Wire into interactive flow (P1-3)","acceptance_criteria":"- [ ] mcpi add \u003cserver\u003e --recommend flag exists\n- [ ] Flag triggers project detection and recommendation engine\n- [ ] Recommendations passed to display layer\n- [ ] Flag documented in mcpi add --help\n- [ ] Integration tests pass for --recommend flag","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-25T18:24:43.866312-07:00","updated_at":"2025-11-25T18:25:34.835803-07:00","closed_at":"2025-11-25T18:25:34.835803-07:00","source_repo":"."}
{"id":"MCPI-q76","content_hash":"4f2d3fa8b3affa892783a11312c713d8043acb8f81ea0cb532f1ab535dfd9fb6","title":"Complete v0.6.0 Template Discovery CLI integration - Rich display for recommendations","description":"This is P1-2 from BACKLOG.md: Implement Rich display for template recommendations.\n\nCreate user-friendly, informative display showing:\n- Recommended templates with confidence scores\n- Reasons why each template is recommended\n- Server requirements and configuration preview\n- Visual hierarchy and color coding\n\nEffort: ~4 hours","design":"1. Create display_recommendations() function using Rich library\n2. Build Rich table with columns: Rank, Template, Confidence, Reasons\n3. Use color coding: green (high confidence \u003e0.7), yellow (medium 0.4-0.7), red (low \u003c0.4)\n4. Format confidence as percentage with progress bar\n5. Show top recommendation with special highlighting\n6. Add footer with instructions for selection","acceptance_criteria":"- [ ] Rich table displays recommendations sorted by confidence\n- [ ] Confidence scores shown with visual indicators (colors, symbols)\n- [ ] Recommendation reasons displayed clearly\n- [ ] Template metadata shown (name, description, scope)\n- [ ] Display is readable and user-friendly\n- [ ] Unit tests for display formatting","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-25T18:25:13.802932-07:00","updated_at":"2025-11-25T18:25:13.802932-07:00","source_repo":"."}
{"id":"MCPI-way","content_hash":"5d08462e7fc3b357db9c8da3bbc641bcc663c23deaeb5aff0dde69260c13ec22","title":"Complete v0.6.0 Template Discovery CLI integration - Interactive selection flow","description":"This is P1-3 from BACKLOG.md: Wire up interactive accept/decline flow for template recommendations.\n\nImplement user interaction flow:\n- Display recommendations (using P1-2)\n- Prompt user to select a recommendation or decline\n- On acceptance: proceed with selected template\n- On decline: fall back to manual template selection or standard flow\n\nEffort: ~3 hours","design":"1. After displaying recommendations, prompt: 'Select recommendation (1-N) or decline (0):'\n2. Validate input (integer in range or 0)\n3. If valid selection: proceed with add using selected template\n4. If decline (0): continue to standard add flow (--list-templates or manual config)\n5. If invalid: re-prompt with error message\n6. Wire into existing add command flow","acceptance_criteria":"- [ ] User prompted to select from recommendations\n- [ ] Selection validated (1-N or decline)\n- [ ] On acceptance: selected template used for server configuration\n- [ ] On decline: fallback to standard add flow\n- [ ] Error handling for invalid input\n- [ ] E2E tests for full interactive flow","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-25T18:24:44.032893-07:00","updated_at":"2025-11-25T18:25:34.929332-07:00","closed_at":"2025-11-25T18:25:34.929332-07:00","source_repo":"."}
{"id":"MCPI-y6t","content_hash":"520dae253588c05279f37741dde08b221a065fe0ba505587058f5637b8d9d7d1","title":"Research: Plugin structure and extension metadata schema analysis","description":"Extension Registry proposal (v2.1) assumes plugin.json contains extension metadata (commands, agents, skills) but initial inspection of real plugins shows NO EVIDENCE of this.\n\nExamined Plugins:\n- beads: plugin.json has name, description, version, keywords, mcpServers BUT NO commands list\n- beads: 28 .md files in commands/ directory, but NO reference in plugin.json\n- anthropic-agent-skills: marketplace.json DOES list skills with paths\n- Need to examine more plugins to determine patterns\n\nResearch Goals:\n1. Document actual plugin.json schema across 5+ diverse plugins\n2. Document marketplace.json schema variations\n3. Determine if extension metadata exists in structured form\n4. Identify discovery strategy (metadata vs filesystem scanning)\n5. Create comprehensive schema documentation\n\nThis is BLOCKING all Extension Registry planning. Without evidence that extensions can be indexed from metadata, the entire proposal's foundation is unverified.","design":"Research Plan:\n1. Select 5 diverse plugins from different marketplaces:\n   - beads (beads-marketplace) - DONE\n   - anthropic-agent-skills - DONE\n   - dev-loop (if available)\n   - 2-3 more from npm registry or other sources\n\n2. For each plugin, document:\n   - plugin.json: full schema, all fields\n   - marketplace.json: schema if exists\n   - Commands: listed in metadata? discovered via filesystem?\n   - Agents: same question\n   - Skills: same question\n   - MCP Servers: already confirmed in metadata\n   - Directory structure: where extensions live\n\n3. Create schema documentation:\n   - Common fields (appear in all plugins)\n   - Optional fields (only in some)\n   - Marketplace variations\n   - Extension discovery patterns\n\n4. Assess indexing feasibility:\n   - Can we index extensions from metadata alone?\n   - Do we need filesystem scanning?\n   - What's the reliable discovery strategy?\n   - Are there multiple schema versions?\n\n5. Document findings in research report (.agent_planning/)","acceptance_criteria":"Acceptance Criteria:\n- Examined 5+ diverse plugins from different sources\n- Documented plugin.json schema for each\n- Documented marketplace.json schema for each\n- Determined how commands/agents/skills are exposed (metadata vs filesystem)\n- Created comprehensive schema documentation\n- Assessed feasibility of extension indexing approach\n- Research report written with evidence and recommendations\n- Clear GO/NO-GO recommendation for metadata-based indexing","status":"open","priority":0,"issue_type":"task","created_at":"2025-11-27T15:42:20.585687-07:00","updated_at":"2025-11-27T15:42:20.585687-07:00","source_repo":".","labels":["blocking","extension-registry","research"]}
{"id":"MCPI-zw2","content_hash":"c5c4c0a34b78d7ca259154a1c8a42990d6abb17d23aa8fddb821559b4c798889","title":"Update tests to eliminate deprecation warnings","description":"Test suite shows 16 deprecation warnings for old API usage:\n\nWarning: create_default_catalog() is deprecated. Use create_default_catalog_manager()\n\nImpact: LOW - Old API still works, warnings are just noise\nFix: Update tests to use new API (create_default_catalog_manager)\n\nThis is cleanup work to improve test output quality and ensure tests use current best practices.","design":"1. Search codebase for create_default_catalog() calls in tests/\n2. Replace with create_default_catalog_manager()\n3. Update any related code that uses catalog directly\n4. Run tests to verify no regressions\n5. Verify deprecation warnings gone","acceptance_criteria":"- [ ] Zero deprecation warnings in test output\n- [ ] All tests use create_default_catalog_manager()\n- [ ] No tests use deprecated create_default_catalog()\n- [ ] Test pass rate remains 100%","status":"open","priority":3,"issue_type":"chore","created_at":"2025-11-25T18:24:44.228485-07:00","updated_at":"2025-11-25T18:24:44.228485-07:00","source_repo":"."}
